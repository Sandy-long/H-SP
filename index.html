<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¿åŠ¨è§„åˆ’å»ºè®®åŠ©æ‰‹ï¼ˆç§‘å­¦ç‰ˆï¼‰</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f9ff 0%, #e8f5ff 100%);
      padding: 20px;
      max-width: 1100px;
      margin: auto;
      line-height: 1.6;
    }
    header {
      text-align: center;
      background: linear-gradient(90deg, #3a7bd5, #00d2ff);
      padding: 20px 0;
      border-radius: 12px;
      margin-bottom: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      color: white;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
    }
    @media(max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
    }
    .card {
      background: #ffffff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      margin-bottom: 20px;
      transition: transform 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.12);
    }
    .settings-card {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 25px;
    }
    @media(max-width: 768px) {
      .settings-card {
        grid-template-columns: 1fr;
      }
    }
    .progress-bar {
      background: #e0e0e0;
      height: 22px;
      border-radius: 11px;
      margin: 15px 0;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      transition: width 0.5s ease;
      background: linear-gradient(90deg, #36d1dc, #5b86e5);
    }
    .log-entry {
      background: #f9fbfd;
      margin: 8px 0;
      padding: 12px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 4px solid #36d1dc;
      transition: all 0.2s ease;
    }
    .log-entry:hover {
      background: #f0f7ff;
      transform: translateX(3px);
    }
    select, input, button {
      padding: 12px;
      font-size: 16px;
      margin: 8px 0;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #f8fafc;
      transition: all 0.2s ease;
    }
    input:focus, select:focus {
      border-color: #5b86e5;
      outline: none;
      box-shadow: 0 0 0 3px rgba(91, 134, 229, 0.1);
    }
    button {
      background: linear-gradient(90deg, #36d1dc, #5b86e5);
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 6px;
      font-weight: 600;
      transition: all 0.2s ease;
      box-shadow: 0 4px 6px rgba(54, 209, 220, 0.2);
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 10px rgba(54, 209, 220, 0.4);
    }
    .time-slot {
      margin-top: 20px;
    }
    .time-slot-title {
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 15px;
      color: #2c3e50;
    }
    .setting-box {
      background: linear-gradient(to bottom, #e9f6ff, #d8eeff);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #c9e1ff;
    }
    .setting-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #2c3e50;
      font-size: 18px;
      display: flex;
      align-items: center;
    }
    .setting-title i {
      margin-right: 8px;
      color: #5b86e5;
    }
    .recommendation {
      font-style: italic;
      color: #2d6e9b;
      font-size: 14px;
      margin-top: 10px;
      background: #e8f4fc;
      padding: 10px;
      border-radius: 6px;
      border-left: 3px solid #5b86e5;
    }
    .goal-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    #goalAdjustBtn {
      width: auto;
      padding: 8px 16px;
      font-size: 14px;
      margin-left: 10px;
    }
    .setting-row {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    .setting-row label {
      width: 140px;
      flex-shrink: 0;
      font-weight: 500;
    }
    .info-icon {
      display: inline-flex;
      width: 18px;
      height: 18px;
      background: linear-gradient(135deg, #36d1dc, #5b86e5);
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 18px;
      font-size: 12px;
      margin-left: 8px;
      cursor: help;
      justify-content: center;
      align-items: center;
    }
    
    /* ç‰¹æ®Šäººç¾¤åŒºåŸŸ */
    .special-area {
      background-color: #fff9d9;
      border-left: 4px solid #ffc107;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: inset 0 0 10px rgba(255, 213, 79, 0.2);
    }
    .special-title {
      font-weight: bold;
      color: #5d4037;
      margin-bottom: 12px;
      font-size: 18px;
      display: flex;
      align-items: center;
    }
    .special-title i {
      margin-right: 10px;
      color: #ff9800;
    }
    
    /* å¹´é¾„é€‰æ‹©å™¨æ ·å¼ */
    .age-selector {
      background: linear-gradient(to right, #e3f2fd, #bbdefb);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      margin-bottom: 15px;
      border: 1px solid #90caf9;
    }
    .age-label {
      font-weight: bold;
      color: #0d47a1;
      margin-bottom: 8px;
    }
    
    /* è¿åŠ¨ç±»å‹å¡ç‰‡ */
    .exercise-card {
      background: #ffffff;
      margin: 15px 0;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .exercise-card:hover {
      transform: scale(1.02);
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }
    .exercise-header {
      background: linear-gradient(to right, #36d1dc, #5b86e5);
      color: white;
      padding: 15px;
      font-weight: bold;
      font-size: 18px;
    }
    .exercise-body {
      padding: 15px;
    }
    .exercise-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .detail-item {
      background: #f8fafc;
      padding: 10px;
      border-radius: 6px;
      border-left: 3px solid #5b86e5;
    }
    .exercise-benefits {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px dashed #ddd;
    }
    
    /* å¡è·¯é‡Œæ¶ˆè€—æŒ‡ç¤ºå™¨ */
    .calorie-indicator {
      background: linear-gradient(to right, #ff6a00, #ee0979);
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      display: inline-block;
      font-size: 12px;
      margin-left: 5px;
    }
    
    /* æ—¶é—´æ§½æ ·å¼ */
    .time-option {
      background: #eef7ff;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      border: 1px solid #cce0ff;
      transition: all 0.3s ease;
      margin-bottom: 10px;
    }
    .time-option.selected {
      background: linear-gradient(to bottom, #36d1dc, #5b86e5);
      color: white;
      border-color: #36d1dc;
    }
    
    /* è®¡ç®—è¯´æ˜åŒºåŸŸ */
    .calculation-info {
      background: #f0f4f8;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      border-left: 4px solid #36d1dc;
      font-size: 14px;
      line-height: 1.6;
    }
    
    /* ç»Ÿè®¡å¡ç‰‡ */
    .exercise-summary-card {
      background: linear-gradient(to right, #f0f7ff, #e1eeff);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      border: 1px solid #c2d9ff;
    }
    
    h2 {
      color: #2c3e50;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
      margin-bottom: 15px;
    }
    
    ul {
      list-style-type: none;
      padding: 0;
    }
    ul li {
      padding: 8px 12px;
      margin-bottom: 6px;
      background: #f8f9ff;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
    }
    ul li:nth-child(even) {
      background: #f1f4ff;
    }
    
    /* å›¾æ ‡æ ·å¼ */
    .icon {
      display: inline-block;
      margin-right: 8px;
      font-size: 16px;
    }
    
    /* åŠ è½½åŠ¨ç”» */
    .loader {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3498db;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: none;
      margin: 0 auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* è¿åŠ¨å¼ºåº¦æŒ‡ç¤ºå™¨ */
    .intensity-meter {
      display: flex;
      height: 10px;
      background: #ddd;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 5px;
    }
    .intensity-level {
      height: 100%;
    }
    
    /* æ¯æ—¥è®¡åˆ’åŒºåŸŸ */
    .daily-plan-box {
      background: linear-gradient(to right, #f0f9ff, #e6f7ff);
      padding: 20px;
      border-radius: 10px;
      margin: 25px 0;
      border: 1px solid #b3e0ff;
    }
    .daily-plan-header {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    .daily-plan-header i {
      margin-right: 10px;
      font-size: 24px;
    }
    .daily-exercise-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 15px;
      background: white;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .exercise-type {
      display: inline-block;
      width: 24px;
      height: 24px;
      text-align: center;
      line-height: 24px;
      border-radius: 50%;
      margin-right: 12px;
      font-size: 14px;
      font-weight: bold;
    }
    .aerobic {
      background: linear-gradient(to right, #36d1dc, #5b86e5);
      color: white;
    }
    .strength {
      background: linear-gradient(to right, #ff8c00, #ff4500);
      color: white;
    }
    .flexibility {
      background: linear-gradient(to right, #9c27b0, #673ab7);
      color: white;
    }
    .daily-total {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      margin-top: 20px;
      background: #3a7bd5;
      color: white;
      font-weight: bold;
      border-radius: 8px;
    }
    
    /* å“åº”å¼è°ƒæ•´ */
    @media(max-width: 576px) {
      .setting-row {
        flex-direction: column;
        align-items: flex-start;
      }
      .setting-row label {
        margin-bottom: 5px;
        width: auto;
      }
      .exercise-details {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>è¿åŠ¨è§„åˆ’å»ºè®®åŠ©æ‰‹ï¼ˆç§‘å­¦ç‰ˆï¼‰</h1>
    <p>æ ¹æ®ä¸ªäººæƒ…å†µåˆ¶å®šç§‘å­¦çš„è¿åŠ¨è®¡åˆ’ï¼ŒåŠ©åŠ›å¥åº·ç”Ÿæ´»</p>
  </header>
  
  <div class="container">
    <!-- è¿åŠ¨æ¨èåŒº -->
    <div class="card">
      <h2><i class="icon">ğŸƒâ€â™‚ï¸</i>ä¸ºæ‚¨æ¨èçš„è¿åŠ¨è®¡åˆ’</h2>
      <div id="exerciseRecommendation"></div>
      
      <!-- ç‰¹æ®Šäººç¾¤åŒºåŸŸ -->
      <div class="special-area" id="specialArea">
        <div class="special-title"><i class="icon">âš ï¸</i>ç‰¹åˆ«æé†’</div>
        <div class="recommendation">
          æ‚¨çš„èº«ä½“çŠ¶å†µæˆ–å¹´é¾„éœ€è¦ç‰¹åˆ«å…³æ³¨è¿åŠ¨å®‰å…¨ï¼š
        </div>
        <ul id="specialRecommendations">
          <!-- å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </ul>
      </div>
    </div>

    <!-- è®¾ç½®åŒº -->
    <div class="card">
      <!-- è®¾ç½®é¢æ¿ -->
      <div class="setting-box">
        <div class="setting-title"><i class="icon">âš™ï¸</i>ä¸ªäººè®¾ç½®</div>
        
        <!-- å¹´é¾„é€‰æ‹©å™¨ -->
        <div class="age-selector">
          <div class="age-label"><i class="icon">ğŸ‘¶</i>å¹´é¾„èŒƒå›´ï¼š</div>
          <div>
            <select id="ageRange" required>
              <option value="3-6">å¹¼å„¿ (3-6å²)</option>
              <option value="7-12">å„¿ç«¥ (7-12å²)</option>
              <option value="13-18">é’å°‘å¹´ (13-18å²)</option>
              <option value="19-45" selected>ä¸­é’å¹´ (19-45å²)</option>
              <option value="46-65">ä¸­å¹´ (46-65å²)</option>
              <option value="65+">è€å¹´ (65å²ä»¥ä¸Š)</option>
            </select>
          </div>
        </div>
        
        <!-- ä½“é‡è¾“å…¥ -->
        <div class="setting-row">
          <label for="weight"><i class="icon">âš–ï¸</i>ä½“é‡ (kg):</label>
          <input type="number" id="weight" min="15" max="200" step="0.1" placeholder="è¯·è¾“å…¥ä½“é‡" value="65">
        </div>
        
        <!-- å¥åº·çŠ¶æ€ -->
        <div class="setting-row">
          <label for="healthCondition"><i class="icon">â¤ï¸</i>å¥åº·çŠ¶æ€:</label>
          <select id="healthCondition">
            <option value="excellent">å¥åº·æ— ç‰¹æ®Šé—®é¢˜</option>
            <option value="good" selected>æ™®é€šå¥åº·</option>
            <option value="fair">æœ‰å…³èŠ‚é—®é¢˜</option>
            <option value="poor">æœ‰å¿ƒè„é—®é¢˜</option>
            <option value="recovery">åº·å¤æœŸ</option>
          </select>
        </div>
        
        <!-- è¿åŠ¨ç›®æ ‡ -->
        <div class="setting-row">
          <label for="goalType"><i class="icon">ğŸ¯</i>è¿åŠ¨ç›®æ ‡:</label>
          <select id="goalType">
            <option value="health">ä¿æŒå¥åº·</option>
            <option value="weight_loss" selected>å‡è‚¥/å¡‘å½¢</option>
            <option value="muscle_gain">å¢è‚Œ/åŠ›é‡</option>
            <option value="endurance">æé«˜è€åŠ›</option>
            <option value="flexibility">æŸ”éŸ§æ€§æ”¹å–„</option>
          </select>
        </div>
        
        <!-- æ—¶é—´åå¥½ -->
        <div class="setting-row">
          <label for="timePreference"><i class="icon">â±ï¸</i>æ—¶é—´åå¥½:</label>
          <select id="timePreference">
            <option value="short">æ—¶é—´æœ‰é™ (<30åˆ†é’Ÿ/å¤©)</option>
            <option value="medium" selected>ä¸­ç­‰æ—¶é•¿ (30-60åˆ†é’Ÿ/å¤©)</option>
            <option value="long">å……è¶³æ—¶é—´ (>60åˆ†é’Ÿ/å¤©)</option>
          </select>
        </div>
        
        <!-- æ¯å‘¨å¤©æ•° -->
        <div class="setting-row">
          <label for="daysAvailable"><i class="icon">ğŸ“…</i>æ¯å‘¨å¯è¿åŠ¨å¤©æ•°:</label>
          <select id="daysAvailable">
            <option value="1-2">1-2å¤©</option>
            <option value="3-4" selected>3-4å¤©</option>
            <option value="5-6">5-6å¤©</option>
            <option value="7">æ¯å¤©</option>
          </select>
        </div>
        
        <!-- è®¡ç®—æŒ‰é’® -->
        <button id="calculatePlan"><i class="icon">ğŸ§®</i>ç”Ÿæˆè¿åŠ¨è®¡åˆ’</button>
      </div>
      
      <!-- ç»“æœç»Ÿè®¡ -->
      <div class="exercise-summary-card">
        <div class="setting-title"><i class="icon">ğŸ“Š</i>è®¡åˆ’æ‘˜è¦</div>
        <div>
          <div>
            <ul id="exerciseSummary">
              <!-- å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            
			
			</ul>
			 <div class="calculation-info">
          <!-- æ·»åŠ çš„ç§‘å­¦è¿åŠ¨å»ºè®® -->
      <br>
        <strong>ç§‘å­¦è¿åŠ¨å»ºè®®ï¼š</strong> ä¸–ç•Œå«ç”Ÿç»„ç»‡æŒ‡å—2020<br>ğŸ’ª æˆå¹´äººåº”ä¿æŒæ¯å‘¨150-300åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨
æˆ–75-150åˆ†é’Ÿé«˜å¼ºåº¦æœ‰æ°§è¿åŠ¨ + æ¯å‘¨2æ¬¡åŠ›é‡è®­ç»ƒ
<br>â³ æ¯æ¬¡æ—¶é•¿30-60åˆ†é’Ÿä¸ºæœ€ä½³ï¼ˆè¶…çŸ­è®­ç»ƒ10-15åˆ†é’ŸÃ—å¤šç»„æ¬¡äº¦æœ‰æ•ˆï¼‰
<br>ğŸ“… ç†æƒ³é¢‘ç‡æ¯å‘¨3-5å¤©ï¼Œå»ºè®®é—´éš”ä¼‘æ¯ä¸è¶…è¿‡48å°æ—¶
<br>ğŸ§’ å„¿ç«¥é’å°‘å¹´éœ€æ¯å¤©â‰¥60åˆ†é’Ÿä¸­é«˜å¼ºåº¦æ´»åŠ¨<br>
     
        </ul>
        <br><strong>ç ”ç©¶è¡¨æ˜:</strong> åšæŒ12å‘¨è§„å¾‹è¿åŠ¨å¯å°†å¿ƒè¡€ç®¡ç–¾ç—…é£é™©é™ä½27%ï¼Œè®¤çŸ¥éšœç¢é£é™©é™ä½30%
      </div><br>
    </div>
			
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // è¿åŠ¨æ•°æ®åº“
    const exerciseDatabase = {
      aerobic: [
        { 
          id: "walking",
          name: "å¿«èµ°", 
          caloriePerMin: 4.5,
          intensity: "low",
          suitableAges: ["7-12", "13-18", "19-45", "46-65", "65+"],
          benefits: ["æ”¹å–„å¿ƒè¡€ç®¡å¥åº·", "é€‚åˆåˆå­¦è€…", "ä½å†²å‡»å…³èŠ‚"],
          tips: "ä¿æŒæ­£å¸¸æ­¥å¹…ï¼ŒåŒè‡‚è‡ªç„¶æ‘†åŠ¨ã€‚"
        },
        { 
          id: "running",
          name: "æ…¢è·‘", 
          caloriePerMin: 8,
          intensity: "moderate",
          suitableAges: ["7-12", "13-18", "19-45", "46-65"],
          benefits: ["ç‡ƒçƒ§å¡è·¯é‡Œæ•ˆç‡é«˜", "å¢å¼ºå¿ƒè‚ºåŠŸèƒ½"],
          tips: "ç©¿ç€åˆé€‚çš„è·‘é‹ï¼Œæ³¨æ„è·‘æ­¥å§¿åŠ¿å‡å°‘å†²å‡»ã€‚"
        },
        { 
          id: "cycling",
          name: "è‡ªè¡Œè½¦", 
          caloriePerMin: 6.5,
          intensity: "moderate",
          suitableAges: ["7-12", "13-18", "19-45", "46-65", "65+"],
          benefits: ["å¢å¼ºä¸‹è‚¢åŠ›é‡", "ä½å†²å‡»", "é€šå‹¤ä¾¿åˆ©"],
          tips: "è°ƒæ•´åº§æ¤…é«˜åº¦ï¼Œè†ç›–å¾®å¼¯é¿å…è¿‡ä¼¸ã€‚"
        },
        { 
          id: "swimming",
          name: "æ¸¸æ³³", 
          caloriePerMin: 7.5,
          intensity: "moderate-high",
          suitableAges: ["3-6", "7-12", "13-18", "æé€Ÿä½“è‚²9-45", "46-65", "65+"],
          benefits: ["å…¨èº«æ€§è¿åŠ¨", "å…³èŠ‚é›¶å‹åŠ›", "å¿ƒè‚ºèƒ½åŠ›æå‡"],
          tips: "å­¦ä¹ æ­£ç¡®çš„å‘¼å¸æŠ€å·§ï¼Œåˆ†æ³³å§¿ç»ƒä¹ ã€‚"
        },
        { 
          id: "jump_rope",
          name: "è·³ç»³", 
          caloriePerMin: 10,
          intensity: "high",
          suitableAges: ["7-12", "13-18", "19-45"],
          benefits: ["é«˜ç‡ƒè„‚æ•ˆç‡", "åè°ƒæ€§è®­ç»ƒ"],
          tips: "ä¿æŒç›´èƒŒï¼ŒåŒè„šè½»è·³å‡å°‘å†²å‡»ã€‚"
        },
        {
          id: "taekwondo",
          name: "è·†æ‹³é“",
          caloriePeræé€Ÿä½“è‚²Min: 8,
          intensity: "moderate-high",
          suitableAges: ["7-12", "13-18", "19-45"],
          benefits: ["æå‡çˆ†å‘åŠ›", "å¢å¼ºçµæ´»æ€§", "è®­ç»ƒçºªå¾‹æ€§"],
          tips: "å­¦ä¹ æ ‡å‡†åŠ¨ä½œï¼Œæ³¨æ„çƒ­èº«ï¼Œé¿å…æ‹‰ä¼¤ã€‚"
        },
        {
          id: "badminton",
          name: "ç¾½æ¯›çƒ",
          caloriePerMin: 7,
          intensity: "moderate-high",
          suitableAges: ["7-12", "13-18", "19-45", "46-65"],
          benefits: ["æå‡ååº”é€Ÿåº¦", "åè°ƒæ€§å¥½", "å¿ƒè‚ºè€åŠ›æå‡"],
          tips: "æ³¨æ„è„šæ­¥ç§»åŠ¨å’Œæ¡æ‹å§¿åŠ¿ï¼Œæ‰“å‰å……åˆ†çƒ­èº«ã€‚"
        },
        {
          id: "slow_jogging",
          name: "è¶…æ…¢è·‘",
          caloriePerMin: 5.5,
          intensity: "low-moderate",
          suitableAges: ["13-18", "19-45", "46-65", "65+"],
          benefits: ["ä½å†²å‡»æŒä¹…è¿åŠ¨", "å‡å‹æ”¾æ¾", "é€‚åˆä½“èƒ½è¾ƒå¼±è€…"],
          tips: "ä¿æŒèƒ½è¯´è¯çš„é€Ÿåº¦ï¼Œå°æ­¥è½»è½åœ°ï¼Œé¿å…è¿½æ±‚é€Ÿåº¦ã€‚"
        }
      ],
      strength: [
        { 
          id: "bodyweight",
          name: "è‡ªé‡è®­ç»ƒ", 
          caloriePerMin: 5,
          intensity: "moderate",
          suitableAges: ["13-18", "19-45", "46-65"],
          benefits: ["æ— éœ€å™¨æ¢°", "æå‡ç›¸å¯¹åŠ›é‡", "å¼ºåŒ–æ ¸å¿ƒ"],
          examples: ["ä¿¯å§æ’‘", "æ·±è¹²", "å¹³æ¿æ”¯æ’‘", "å¼•ä½“å‘ä¸Š"]
        },
        { 
          id: "dumbbell",
          name: "å“‘é“ƒè®­ç»ƒ", 
          caloriePerMin: 6,
          intensity: "moderate-high",
          suitableAges: ["19-45", "46-65"],
          benefits: ["çµæ´»æ§åˆ¶å¼ºåº¦", "å­¤ç«‹è®­ç»ƒç›®æ ‡è‚Œç¾¤"],
          examples: ["å“‘é“ƒå¼¯ä¸¾", "è‚©éƒ¨æ¨ä¸¾", "ç¡¬æ‹‰"]
        },
        { 
          id: "resistance",
          name: "å¼¹åŠ›å¸¦è®­ç»ƒ", 
          caloriePerMin: 4.5,
          intensity: "low-moderate",
          suitableAges: ["13-18", "19-45", "46-65", "65+"],
          benefits: ["ä½å†²å‡»å…³èŠ‚", "å¤šè§’åº¦è®­ç»ƒ", "ä¾¿æº"],
          examples: ["å¼¹åŠ›å¸¦åˆ’èˆ¹", "å¤–æ—‹ç»ƒä¹ "]
        }
      ],
      flexibility: [
        { 
          id: "stretching",
          name: "é™æ€æ‹‰ä¼¸", 
          caloriePerMin: 1.5,
          intensity: "low",
          suitableAges: ["7-12", "13-18", "19-45", "46-65", "65+"],
          benefits: ["å¢åŠ å…³èŠ‚æ´»åŠ¨åº¦", "é¢„é˜²å—ä¼¤", "ä¿ƒè¿›æ¢å¤"],
          tips: "æ¯ä¸ªåŠ¨ä½œä¿æŒ15-30ç§’ï¼Œæ„Ÿè§‰è½»å¾®æ‹‰ä¼¸æ„Ÿã€‚"
        },
        { 
          id: "yoga",
          name: "ç‘œä¼½", 
          caloriePerMin: 4,
          intensity: "low-moderate",
          suitableAges: ["13-18", "19-45", "46-65", "65+"],
          benefits: ["æ”¹å–„å¹³è¡¡", "èº«å¿ƒè¿æ¥", "æ ¸å¿ƒåŠ›é‡"],
          tips: "ä»åŸºç¡€å§¿åŠ¿å¼€å§‹ï¼Œå…³æ³¨å‘¼å¸è€Œä¸æ˜¯åŠ¨ä½œæ·±åº¦ã€‚"
        },
        { 
          id: "tai_chi",
          name: "å¤ªæ", 
          caloriePerMin: 3,
          intensity: "low",
          suitableAges: ["46-65", "65+"],
          benefits: ["æé«˜å¹³è¡¡èƒ½åŠ›", "ç²¾ç¥ä¸“æ³¨", "æ”¹å–„å§¿åŠ¿"],
          tips: "ä¿æŒç¼“æ…¢å¹³ç¨³çš„èŠ‚å¥ï¼Œè†ç›–å¾®å±ˆé¿å…è¿‡åº¦ä¼¸å±•ã€‚"
        }
      ]
    };

    // å¹´é¾„æ¨èè®¾ç½®
    const ageRecommendations = {
      "3-6": {
        focus: ["aerobic", "flexibility"],
        dailyMinutes: 120,
        intensity: "playful"
      },
      "7-12": {
        focus: ["aerobic", "flexibility"],
        dailyMinutes: 60,
        intensity: "moderate"
      },
      "13-18": {
        focus: ["aerobic", "strength", "flexibility"],
        dailyMinutes: 60,
        intensity: "moderate-high"
      },
      "19-45": {
        focus: ["aerobic", "strength", "flexibility"],
        dailyMinutes: 40,
        intensity: "moderate"
      },
      "46-65": {
        focus: ["aerobic", "flexibility"],
        dailyMinutes: 35,
        intensity: "moderate",
        precautions: "é¿å…é«˜å†²å‡»æ´»åŠ¨"
      },
      "65+": {
        focus: ["flexibility", "light-aerobic"],
        dailyMinutes: 30,
        intensity: "low-moderate",
        precautions: "ä¼˜å…ˆå¹³è¡¡è®­ç»ƒ"
      }
    };

    // ç›®æ ‡è®¾ç½®æƒé‡
    const goalAdjustments = {
      "health": {
        ratio: { aerobic: 50, strength: 20, flexibility: 30 }
      },
      "weight_loss": {
        ratio: { aerobic: 60, strength: 30, flexibility: 10 }
      },
      "muscle_gain": {
        ratio: { aerobic: 20, strength: 60, flexibility: 20 }
      },
      "endurance": {
        ratio: { aerobic: 70, strength: 15, flexibility: 15 }
      },
      "flexibility": {
        ratio: { aerobic: 20, strength: 15, flexibility: 65 }
      }
    };

    // æ ¹æ®å¥åº·çŠ¶å†µé™åˆ¶æ´»åŠ¨
    const healthLimitations = {
      "excellent": {},
      "good": {},
      "fair": {
        avoid: ["running", "jump_rope"],
        recommendations: "é¿å…è·³è·ƒå’Œå‰§çƒˆå†²å‡»å…³èŠ‚çš„è¿åŠ¨"
      },
      "poor": {
        avoid: ["running", "strength", "jump_rope"],
        recommendations: "é€‰æ‹©ä½å¼ºåº¦æœ‰æ°§è¿åŠ¨å¹¶åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹è¿›è¡Œ"
      },
      "recovery": {
        avoid: ["high-intensity"],
        recommendations: "ä¸“æ³¨äºæ¢å¤æ€§è¿åŠ¨å’ŒæŸ”éŸ§æ€§è®­ç»ƒ"
      }
    };

    // UIå…ƒç´ 
    const exerciseContainer = document.getElementById('exerciseRecommendation');
    const calculateBtn = document.getElementById('calculatePlan');
    const ageRangeSelect = document.getElementById('ageRange');
    const weightInput = document.getElementById('weight');
    const healthCondition = document.getElementById('healthCondition');
    const goalType = document.getElementById('goalType');
    const timePreference = document.getElementById('timePreference');
    const daysAvailable = document.getElementById('daysAvailable');
    const specialArea = document.getElementById('specialArea');
    const specialRecommendations = document.getElementById('specialRecommendations');
    const exerciseSummary = document.getElementById('exerciseSummary');

    // ç¡®å®šæ€§é€‰æ‹©ç®—æ³•
    function deterministicSelection(availableExercises, seed) {
      // åˆ›å»ºå”¯ä¸€å“ˆå¸Œå€¼
      const seedStr = JSON.stringify(seed);
      let hash = 0;
      for (let i = 0; i < seedStr.length; i++) {
        hash = ((hash << 5) - hash) + seedStr.charCodeAt(i);
        hash |= 0;
      }
      
      // ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…
      const index = Math.abs(hash) % availableExercises.length;
      return availableExercises[index];
    }

    // ç”Ÿæˆè¿åŠ¨è®¡åˆ’
    function generateExercisePlan() {
      // è·å–ç”¨æˆ·è®¾ç½®
      const userSettings = {
        ageRange: ageRangeSelect.value,
        weight: parseFloat(weightInput.value) || 65,
        health: healthCondition.value,
        goal: goalType.value,
        timePref: timePreference.value,
        daysAvail: daysAvailable.value
      };
      
      // éªŒè¯è¾“å…¥
      if (!userSettings.weight || userSettings.weight < 15 || userSettings.weight > 200) {
        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡å€¼ (15-200kg)');
        return;
      }
      
      // ç”Ÿæˆæ¨è
      const recommendations = generateRecommendations(userSettings);
      
      // æ˜¾ç¤ºæ¨è
      displayRecommendations(recommendations);
      
      // ç‰¹åˆ«æé†’
      displaySpecialRecommendations(userSettings);
      
      // è®¡åˆ’æ‘˜è¦
      displayPlanSummary(recommendations);
    }

    // è®¡ç®—æ¨èé¡¹ç›®
    function generateRecommendations(settings) {
      // è·å–åŸºç¡€å¹´é¾„å»ºè®®
      const ageRec = ageRecommendations[settings.ageRange];
      const goalRec = goalAdjustments[settings.goal];
      
      // è®¡ç®—æ¯æ—¥æ€»æ—¶é—´
      let dailyTotalMinutes;
      switch(settings.timePref) {
        case "short": dailyTotalMinutes = 20; break;
        case "long": dailyTotalMinutes = 80; break;
        default: dailyTotalMinutes = 45;
      }
      
      // è®¡ç®—æ¯å‘¨æ€»åˆ†é’Ÿæ•°
      const days = parseInt(settings.daysAvail.split('-')[0]) || 3;
      const weeklyTotal = dailyTotalMinutes * days;
      
      // è®¡ç®—æ¯æ—¥å„åˆ†ç±»åˆ†é’Ÿæ•°
      const typeRatios = {};
      Object.keys(goalRec.ratio).forEach(type => {
        typeRatios[type] = Math.round(dailyTotalMinutes * (goalRec.ratio[type]/100));
      });
      
      // é€‰æ‹©é€‚åˆçš„ç»ƒä¹ 
      const selectedExercises = {};
      
      Object.keys(typeRatios).forEach(type => {
        const exerciseType = exerciseDatabase[type];
        
        // è¿‡æ»¤æ‰å› å¥åº·åŸå› éœ€é¿å…çš„æ´»åŠ¨
        const healthLimits = healthLimitations[settings.health]?.avoid || [];
        const availableExercises = exerciseType.filter(ex => 
          ex.suitableAges.includes(settings.ageRange) && 
          !healthLimits.includes(ex.id)
        );
        
        if (availableExercises.length > 0) {
          // ä½¿ç”¨ç¡®å®šæ€§é€‰æ‹©ç®—æ³•é€‰æ‹©è¿åŠ¨
          selectedExercises[type] = {
            type: type,
            exercise: deterministicSelection(availableExercises, settings),
            dailyMinutes: typeRatios[type]
          };
        }
      });
      
      // è®¡ç®—æ¯æ—¥æ€»è®¡
      const dailyTotal = Object.values(selectedExercises).reduce((sum, ex) => sum + ex.dailyMinutes, 0);
      
      return {
        dailyTotal: dailyTotal,
        weeklyTotal: weeklyTotal,
        days: days,
        dailyExercises: selectedExercises
      };
    }

    // æ˜¾ç¤ºæ¨è
    function displayRecommendations(recommendations) {
      let htmlContent = "";
      
      // æ˜¾ç¤ºæ¯æ—¥è®¡åˆ’
      htmlContent += `
        <div class="daily-plan-box">
          <div class="daily-plan-header">
            <i class="icon">ğŸ“…</i>æ¯æ—¥è¿åŠ¨å®‰æ’ (å…±${recommendations.days}å¤©/å‘¨)
          </div>
      `;
      
      // æ˜¾ç¤ºæ¯æ—¥å…·ä½“è¿åŠ¨å®‰æ’
      Object.values(recommendations.dailyExercises).forEach(rec => {
        const typeIcon = {
          aerobic: "ğŸƒâ€â™‚ï¸",
          strength: "ğŸ’ª",
          flexibility: "ğŸ§˜â€â™€ï¸"
        }[rec.type];
        
        const typeClass = {
          aerobic: "aerobic",
          strength: "strength",
          flexibility: "flexibility"
        }[rec.type];
        
        htmlContent += `
          <div class="daily-exercise-item">
            <div>
              <span class="exercise-type ${typeClass}">${typeIcon}</span>
              <span>${rec.exercise.name}</span>
            </div>
            <div>
              <strong>${rec.dailyMinutes}</strong> åˆ†é’Ÿ
            </div>
          </div>
        `;
      });
      
      // æ·»åŠ æ¯æ—¥æ€»è®¡
      htmlContent += `
        <div class="daily-total">
          <span>æ¯æ—¥æ€»æ—¶é•¿</span>
          <span>${recommendations.dailyTotal}åˆ†é’Ÿ</span>
        </div>
      `;
      
      htmlContent += `</div>`; // ç»“æŸæ¯æ—¥è®¡åˆ’ç›’å­
      
      // æ˜¾ç¤ºå„é¡¹è¿åŠ¨è¯¦æƒ…
      const typeNames = {
        aerobic: "æœ‰æ°§è¿åŠ¨",
        strength: "åŠ›é‡è®­ç»ƒ",
        flexibility: "æŸ”éŸ§æ€§"
      };
      
      Object.values(recommendations.dailyExercises).forEach(rec => {
        const ex = rec.exercise;
        const weeklyMinutes = rec.dailyMinutes * recommendations.days;
        
        htmlContent += `
          <div class="exercise-card">
            <div class="exercise-header">${ex.name} <span style="font-size: 14px; opacity: 0.8;">(${typeNames[rec.type]})</span></div>
            <div class="exercise-body">
              <div class="exercise-details">
                <div class="detail-item">
                  <i class="icon">â±ï¸</i>æ¯å‘¨${weeklyMinutes}åˆ†é’Ÿ<br>
                  <small>åˆ†${recommendations.days}æ¬¡è¿›è¡Œ</small>
                </div>
                <div class="detail-item">
                  <i class="icon">ğŸ”¥</i>å¡è·¯é‡Œä¼°ç®—<br>
                  <small>çº¦${Math.round(ex.caloriePerMin * weeklyMinutes)}å¤§å¡/å‘¨</small>
                </div>
              </div>
              
              <div class="exercise-benefits">
                <strong><i class="icon">ğŸ’ª</i>ä¸»è¦æ•ˆç›Š:</strong> ${ex.benefits.join('ã€')}
              </div>
              
              ${ex.tips ? `<div class="recommendation"><i class="icon">ğŸ’¡</i>å»ºè®®: ${ex.tips}</div>` : ''}
              ${ex.examples ? `<div class="recommendation"><i class="icon">ğŸ“‹</i>ç»ƒä¹ ç¤ºä¾‹: ${ex.examples.join('ã€')}</div>` : ''}
            </div>
          </div>
        `;
      });
      
      exerciseContainer.innerHTML = htmlContent;
    }

    // æ˜¾ç¤ºç‰¹æ®Šå»ºè®®
    function displaySpecialRecommendations(settings) {
      const healthLimits = healthLimitations[settings.health];
      
      // æ ¹æ®å¹´é¾„å’Œå¥åº·çŠ¶å†µæ˜¾ç¤ºç‰¹æ®Šå»ºè®®
      const specialTips = [];
      
      // æ·»åŠ å¹´é¾„ç›¸å…³æç¤º
      const ageTips = {
        "3-6": "æ­¤å¹´é¾„æ®µçš„è¿åŠ¨åº”å›´ç»•æ¸¸æˆå’Œè¶£å‘³æ´»åŠ¨å±•å¼€ï¼Œç›®æ ‡æ˜¯å»ºç«‹åŸºæœ¬è¿åŠ¨æŠ€èƒ½",
        "7-12": "å‘å±•åŸºç¡€è¿åŠ¨èƒ½åŠ›ï¼Œæ³¨é‡åè°ƒæ€§å’Œå¹³è¡¡æ€§è®­ç»ƒ",
        "13-18": "é’æ˜¥æœŸçš„èº«ä½“å‘å±•éœ€è¦å¹³è¡¡çš„åŠ›é‡è®­ç»ƒå’Œéª¨éª¼å¥åº·ç»´æŠ¤",
        "46-65": "å…³æ³¨å…³èŠ‚å¥åº·å’Œéª¨å¯†åº¦ç»´æŒ",
        "65+": "å¹³è¡¡èƒ½åŠ›å’Œé˜²è·Œå€’è®­ç»ƒå°¤ä¸ºé‡è¦"
      };
      
      if (ageTips[settings.ageRange]) {
        specialTips.push(ageTips[settings.ageRange]);
      }
      
      // æ·»åŠ å¥åº·çŠ¶æ€ç›¸å…³æç¤º
      if (healthLimits && healthLimits.recommendations) {
        specialTips.push(healthLimits.recommendations);
      }
      
      // æ ¹æ®ç›®æ ‡æ·»åŠ æç¤º
      const goalTips = {
        "weight_loss": "æœ‰æ°§è¿åŠ¨å’ŒåŠ›é‡è®­ç»ƒç›¸ç»“åˆèƒ½è¾¾åˆ°æœ€ä½³å‡è‚¥æ•ˆæœ",
        "muscle_gain": "ç¡®ä¿æ‘„å…¥è¶³å¤Ÿçš„è›‹ç™½è´¨ä»¥æ”¯æŒè‚Œè‚‰å¢é•¿",
        "endurance": "é€æ­¥å¢åŠ è®­ç»ƒæ—¶é•¿å’Œå¼ºåº¦ï¼Œé¿å…ä¸€æ¬¡æ€§æé«˜å¤ªå¿«",
        "flexibility": "åšæŒæ¯å¤©è¿›è¡Œæ‹‰ä¼¸æ‰èƒ½çœ‹åˆ°æŒä¹…æ”¹å–„"
      };
      
      if (goalTips[settings.goal]) {
        specialTips.push(goalTips[settings.goal]);
      }
      
      // æ˜¾ç¤ºç‰¹æ®Šå»ºè®®åŒºåŸŸ
      if (specialTips.length > 0) {
        let htmlContent = "";
        specialTips.forEach(tip => {
          htmlContent += `<li>${tip}</li>`;
        });
        
        specialRecommendations.innerHTML = htmlContent;
        specialArea.style.display = 'block';
      } else {
        specialArea.style.display = 'none';
      }
    }

    // æ˜¾ç¤ºè®¡åˆ’æ‘˜è¦
    function displayPlanSummary(recommendations) {
      let htmlContent = "";
      
      // åŸºæœ¬ä¿¡æ¯
      htmlContent += `
        <li>
          <span>æ¯å‘¨è¿åŠ¨æ€»é‡</span>
          <span><strong>${recommendations.weeklyTotal}åˆ†é’Ÿ</strong></span>
        </li>
        <li>
          <span>æ¯å‘¨è¿åŠ¨å¤©æ•°</span>
          <span><strong>${recommendations.days}å¤©</strong></span>
        </li>
        <li>
          <span>æ¯æ—¥è¿åŠ¨æ—¶é•¿</span>
          <span><strong>${recommendations.dailyTotal}åˆ†é’Ÿ</strong></span>
        </li>
      `;
      
      exerciseSummary.innerHTML = htmlContent;
    }

    // æ·»åŠ äº‹ä»¶ç›‘å¬
    calculateBtn.addEventListener('click', generateExercisePlan);

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨ç”Ÿæˆä¸€æ¬¡è®¡åˆ’
    window.addEventListener('load', generateExercisePlan);
  </script>
</body>
</html>
